services:
  dashboard:
    build: .
    container_name: house-market-dashboard
    ports:
      - "8338:8000"
    volumes:
      # Persist database in data directory
      - ./data:/app/data
    environment:
      # Use database from data directory
      - DB_DEFAULT=/app/data/properties.db
      # Auto-populate database with initial data on first run (set to false to disable)
      - AUTO_POPULATE=${AUTO_POPULATE:-true}
      # Enable periodic scraper scheduler (runs every hour, set to false to disable)
      - ENABLE_SCHEDULER=${ENABLE_SCHEDULER:-true}
      # If using Ollama, specify the host
      - OLLAMA_HOST=${OLLAMA_HOST:-http://host.docker.internal:11434}
    restart: unless-stopped
    # Add extra_hosts to allow container to reach host machine for Ollama
    extra_hosts:
      - "host.docker.internal:host-gateway"
